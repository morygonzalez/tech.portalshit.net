<p>iTerm 2が素晴らしいということなのでiTermをぼちぼち使ってるんですけど、Vimを起動したときに矢印キーで移動できないことが分かった。「Vimで矢印キーでカーソル移動とか小学生かよ」みたいなご意見もあるでしょうけど、入力モードのときに移動したくなったら <code>j, k, h, l</code> じゃ移動できないでしょ？ そこで矢印キーですよ。</p>

<p>iTermでVimを使っているときも矢印キーでカーソル移動できないものかと、軽くググってみたところ次のような記事に遭遇した。</p>

<p><a href='http://d.hatena.ne.jp/takimo/20080308/1205047505' title='MacBookのiTermでVimを使う時矢印キーで移動が出来ないときの解決方法 - Nobody is perfect.'>MacBookのiTermでVimを使う時矢印キーで移動が出来ないときの解決方法 - Nobody is perfect.</a></p>

<p>これを参考にとりあえず以下のように <code>.zshrc</code> に書いた。</p>
<div>
  <pre>
    <code class='bash'>case &quot;${TERM_PROGRAM}&quot; in
iTerm*)
  export TERM=dtterm
esac</code>
  </pre>
</div>
<p>しかし、これはちょっと自分的にはいただけなかった。</p>
<div>
  <pre>
    <code class='bash'>export TERM=dtterm</code>
  </pre>
</div>
<p>ってやると、termcap的な何かの作用で、Vimを閉じたときにコンソールを復元できなくなる（参照： <a href='http://tech.portalshit.net/2010/07/07/finish-editing-then-restore-console/' title='Vimで編集を終了した後、元のコンソールの状態を復元したい | tech.portalshit.net - CakePHP, Rails, JavaScript'>Vimで編集を終了した後、元のコンソールの状態を復元したい</a>）。僕はVimを閉じた後はコンソールを復元したい派なので、このやり方は受け入れられなかった。</p>

<p><code>.termcap</code> に何か書くことも考えたけど、 <code>.termcap</code> で条件分岐する書き方が分からなかったのでさらにググってみた。すると外人が「iTermの設定で何とかできる」みたいなことを書いてるのを発見した。</p>

<p><a href='http://www.help2go.com/Tutorials/Mac_OS/Using_Arrow_Keys_in_iTerm_with_vi.html' title='Help2Go - free computer help and advice - Using Arrow Keys in iTerm with vi'>Help2Go - free computer help and advice - Using Arrow Keys in iTerm with vi</a></p>

<p>なるほど、 <code>.vimrc</code> とか <code>.zshrc</code> とか側で回避する方法ばかり考えていたけどiTermで回避する方法を考えればよいわけか。</p>

<p>で、iTermを開いてみたところ、iTerm 1の頃から引き継いでいるBookmarkのDefaultの設定がよくなかったみたい。具体的には矢印キーそれぞれに <code>^[[A</code> とか <code>^[[B</code> みたいなキーが割り振られていて、このせいで矢印キーが使えなくなっていたわけだ。</p>

<p>Load Presetから &#8220;Use xterm Defaults&#8221; を選んでみたところ、無事矢印キーでカーソル移動できるようになった。めでたしめでたし。</p>