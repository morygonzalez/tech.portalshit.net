<p><a href='http://give-me-money.g.hatena.ne.jp/cxx/20100802/1280760811' title='MacPortsからHomebrewに移行した - cxxの日記 - give-me-moneyグループ'>シャレオツプログラマーはみんなMacPortsからHomebrewに移行しつつあるっぽい</a>ので、真似してみることにした。</p>

<h3 id='homebrew'>なんでHomebrew？</h3>

<p>そもそもなんでみんな移行するのか？ なんかMacPortsはバッドノウハウの塊らしい。</p>

<p><a href='http://twitter.com/hitode909/status/18526396749' title='Twitter / シャブ山シャブ彦: MacPortsはバッドノウハウの集合だったから，他 ...'>Twitter / シャブ山シャブ彦: MacPortsはバッドノウハウの集合だったから，他 &#8230;</a></p>

<p>MacPortsの何がバッドノウハウなのかちょっとよく分からなかったんだけど、でもよく考えてみたらMacPortsは <code>.bash_profile</code> とか <code>.zshrc</code> とかにへんてこりんなパスを埋め込まないといけないし、PerlとかRubyは一行目に</p>
<div>
  <pre>
    <code class='perl'>#!/usr/bin/perl</code>
  </pre>
</div>
<p>とか</p>
<div>
  <pre>
    <code class='ruby'>#!/usr/bin/env ruby</code>
  </pre>
</div>
<p>とか書くのに使ってるバイナリ本体は <code>/opt/local/bin/</code> にあるとかは気持ち悪いっちゃ気持ち悪い。</p>

<p>HomebrewはLinuxのパッケージ管理ソフトみたいに <code>/usr/local/bin/</code> とかに何でもインストールするので精神衛生上ベターだ。</p>

<p>Homebrewのインストール自体はとても簡単。パッケージ管理スクリプトをRubyで書くってのも、UNIXのことよく分かってない僕にはなかなかよいかもしれない。詳しいことは公式Wikiとかを見て下さい。</p>

<p><a href='http://mxcl.github.com/homebrew/' title='Homebrew — MacPorts driving you to drink? Try Homebrew!'>Homebrew — MacPorts driving you to drink? Try Homebrew!</a></p>

<h3 id='vim'>Vimのインストールではまった</h3>

<p>Homebrew自体は簡単に入った。試しにVimをAppleがコンパイルしたVersion 7.2のものから新しめの7.3に上げて、ついでにRubyオプション入りでコンパイルしたかったので</p>
<div>
  <pre>
    <code class='console'>$ brew install vim</code>
  </pre>
</div>
<p>してみた。しかしながら</p>
<div>
  <pre>
    <code class='console'>Error: No available formula for vim</code>
  </pre>
</div>
<p>と出た。GUI版のMacVimはFormulaパッケージがあるらしいけど、フツーのVimはないらしい。「えー、自分でFormulaファイルを書かなきゃいけないの〜？」って感じだったんだけど、GitHubでテケトーに検索したらいろいろ出てきたので、 <code>/usr/local/Library/Formula/</code> に <code>vim.rb</code> を作ってコピペした。</p>

<p><a href='http://github.com/adamv/homebrew/blob/duplicates/Library/Formula/vim.rb' title='Library/Formula/vim.rb at duplicates from adamv&apos;s homebrew - GitHub'>Library/Formula/vim.rb at duplicates from adamv&#8217;s homebrew - GitHub</a></p>

<p>そんで今度は意気揚々と</p>
<div>
  <pre>
    <code class='console'>$ brew install vim</code>
  </pre>
</div>
<p>してみたんだけど、なんとmakeに失敗する。Python.frameworkを参照してるときにエラーが出てるっぽい。</p>
<div>
  <pre>
    <code class='console'>ld: warning: in /Library/Frameworks//Python.framework/Python, missing required architecture x86\_64 in file</code>
  </pre>
</div>
<p>Appleが配布したのではないPythonを使ってるとこういうエラーが出るとかなんとか外人が言ってる。</p>

<p><a href='http://vim.1045645.n5.nabble.com/Python-link-errors-td1214971.html' title='Nabble - Vim - Mac - Python link errors'>Nabble - Vim - Mac - Python link errors</a></p>

<p>要するに64bit版のPython.frameworkを入れれば良さそうだった。何も考えずにHomebrewで <code>brew install Python</code> とかやって <code>/usr/local/bin/python</code> に新しいPythonを入れてみたりしたんだけど、これは意味なかったっぽい。大人しくPython公式サイトからPython 2.7のインストーラーパッケージをダウンロードしてきてGUIでインストールした。</p>

<p><a href='http://www.python.org/download/releases/' title='Releases'>Releases</a></p>

<p>その後、もう一度 <code>brew install vim</code> をしてみたところ、無事make完了。<code>vim --version |grep ruby</code> で</p>
<div>
  <pre>
    <code class='console'>+ruby</code>
  </pre>
</div>
<p>となった。</p>

<p>まだApacheとかRubyGemsとかはMacPorts版を使っているけど、割と早い段階でHomebrewに移行して、シャレオツプログラマーの仲間入りをしようと思います。</p>